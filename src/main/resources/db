CREATE SCHEMA `library` ;

CREATE TABLE `library`.`users` (
  `user_id` INT(11) NOT NULL AUTO_INCREMENT,
  `user_login` VARCHAR(45) NOT NULL,
  `user_password` VARCHAR(105) NOT NULL,
  `user_name` VARCHAR(45) NULL DEFAULT NULL,
  `user_lastname` VARCHAR(45) NULL,
  `user_email` VARCHAR(45) NULL DEFAULT NULL,
  `user_phone_number` INT(11) NULL DEFAULT NULL,
  UNIQUE INDEX `user_login_UNIQUE` (`user_login` ASC),
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC));

CREATE TABLE `library`.`roles` (
  `role_id` INT(11) NOT NULL AUTO_INCREMENT,
  `role_name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`role_id`),
  UNIQUE INDEX `role_id_UNIQUE` (`role_id` ASC),
  UNIQUE INDEX `role_name_UNIQUE` (`role_name` ASC));

CREATE TABLE `library`.`books` (
  `book_id` INT(11) NOT NULL AUTO_INCREMENT,
  `book_name` VARCHAR(45) NOT NULL,
  `book_info` VARCHAR(400) NULL DEFAULT NULL,
  `book_author` VARCHAR(45) NOT NULL,
  `book_style` VARCHAR(45) NOT NULL,
  UNIQUE INDEX `book_id_UNIQUE` (`book_id` ASC));

CREATE TABLE `library`.`role_user` (
  `user_id` INT NOT NULL,
  `role_id` INT NOT NULL,
  PRIMARY KEY (`user_id`, `role_id`),
  INDEX `role_id_idx` (`role_id` ASC),
  CONSTRAINT `user_id`
    FOREIGN KEY (`user_id`)
    REFERENCES `library`.`users` (`user_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `role_id`
    FOREIGN KEY (`role_id`)
    REFERENCES `library`.`roles` (`role_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);




